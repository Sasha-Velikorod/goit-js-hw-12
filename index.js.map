{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page) {\n  const KEY_API = '51376932-00c07b39d8c117a87ed229cff';\n\n  const options = {\n    params: {\n      key: KEY_API,\n      q: query,\n      page,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n    },\n  };\n\n  const resp = await axios.get('', options);\n\n  return resp.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet lightbox = null;\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      item => `<li class = \"gallery-item\"><a href = \"${item.largeImageURL}\"><img class = \"gallery-img\" src = \"${item.webformatURL}\" alt = \"${item.tags}\"> </a> \n       <div class=\"info\">\n    <div class=\"info-item\">\n      <p class=\"info-title\">Likes</p>\n      <p class=\"info-value\"> ${item.likes}</p>\n    </div>\n    <div class=\"info-item\">\n      <p class=\"info-title\">Views</p>\n      <p class=\"info-value\">${item.views}</p>\n    </div>\n    <div class=\"info-item\">\n      <p class=\"info-title\">Comments</p>\n      <p class=\"info-value\">${item.comments}</p>\n    </div>\n    <div class=\"info-item\">\n      <p class=\"info-title\">Downloads</p>\n      <p class=\"info-value\">${item.downloads}</p>\n    </div>\n  </div>\n          \n  </li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function hideLoader() {\n  const loader = document.querySelector('.loader');\n\n  loader.classList.add('is-hidden');\n}\n\nexport function showLoader() {\n  const loader = document.querySelector('.loader');\n\n  loader.classList.remove('is-hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add('is-hidden');\n}\n","import { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet page = 1;\nlet searchQuery = null;\nlet perPage = 15;\nlet lastPage = 0;\nlet cardHeight = null;\n\nconst onSubmit = async e => {\n  e.preventDefault();\n\n  searchQuery = e.target.elements['search-text'].value.trim();\n  page = 1;\n\n  clearGallery();\n  hideLoadMoreButton();\n\n  if (searchQuery === '') {\n    iziToast.error({\n      message: 'Please enter a valid search query.',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(searchQuery, page);\n\n    if (!data.hits.length) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      hideLoadMoreButton();\n      return;\n    }\n\n    createGallery(data.hits);\n\n    lastPage = Math.ceil(data.totalHits / perPage);\n\n    if (data.totalHits > perPage) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n    }\n  } catch (error) {\n    iziToast.error({\n      message: error,\n    });\n    hideLoadMoreButton();\n  } finally {\n    hideLoader();\n  }\n};\n\nconst onClick = async e => {\n  page += 1;\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(searchQuery, page);\n\n    createGallery(data.hits);\n\n    cardHeight = document\n      .querySelector('.gallery-item')\n      .getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (page >= lastPage) {\n      hideLoadMoreButton();\n      iziToast.error({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      message: error,\n    });\n  } finally {\n    hideLoader();\n    if (page < lastPage) {\n      showLoadMoreButton();\n    }\n  }\n};\n\nform.addEventListener('submit', onSubmit);\nloadMoreBtn.addEventListener('click', onClick);\n"],"names":["axios","getImagesByQuery","query","page","options","gallery","loadMoreBtn","lightbox","createGallery","images","markup","item","SimpleLightbox","clearGallery","hideLoader","showLoader","showLoadMoreButton","hideLoadMoreButton","form","searchQuery","perPage","lastPage","cardHeight","onSubmit","e","iziToast","data","error","onClick"],"mappings":"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"}